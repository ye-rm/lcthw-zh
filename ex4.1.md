> [ye-rm](https://github.com/ye-rm)在2025/3/12重校，考虑到这两节内容还是有用的，从PDF版本中加入，练习序号为书中序号

# 练习 4. 使用调试器

> 原作者的视频是没有的，我建议自己找一个视频学一学

这是一个以视频讲解为主的练习，我会在视频里向你展示如何使用你电脑自带的调试器来调试程序、检测错误，甚至调试正在运行的进程。请观看配套视频以深入了解这个主题。

#### GDB 技巧

以下是你可以用 GNU 调试器（GDB）实现的一些简单技巧：

- `gdb --args`：通常情况下，gdb 会把你提供的参数当作是给它自己的。使用 `--args` 可以将这些参数传递给要调试的程序。
- `thread apply all bt`：打印所有线程的调用栈回溯信息。这非常有用。
- `gdb --batch --ex r --ex bt --ex q --args`：运行程序，这样如果程序崩溃，你就能得到调用栈回溯信息。

#### GDB 快速参考

视频有助于你学习如何使用调试器，但在实际操作时，你需要随时查阅相关命令。以下是我在视频中使用过的 GDB 命令的快速参考，以便你在后续学习本书内容时使用：

- `run [args]`：使用指定的参数 `[args]` 启动你的程序。
- `break [file:]function`：在指定的文件（可选）和函数处设置断点。你也可以用 `b` 作为简写。
- `backtrace`：打印当前调用栈的回溯信息。简写为 `bt`。
- `print expr`：打印表达式 `expr` 的值。简写为 `p`。
- `continue`：继续运行程序。简写为 `c`。
- `next`：执行下一行代码，但会跳过函数调用。简写为 `n`。
- `step`：执行下一行代码，如果是函数调用则进入函数内部。简写为 `s`。
- `quit`：退出 GDB。
- `help`：列出命令的类型。之后你可以获取某类命令或特定命令的帮助信息。
- `cd`、`pwd`、`make`：这些命令的使用方式和在 shell 中一样。
- `shell`：快速启动一个 shell，以便你可以执行其他操作。
- `clear`：清除一个断点。
- `info break`、`info watch`：显示断点和观察点的相关信息。
- `attach pid`：附加到一个正在运行的进程，以便对其进行调试。
- `detach`：从进程中分离。
- `list`：列出接下来的十行源代码。加上 `-` 则列出前十行代码。

#### LLDB 快速参考

在 OS X 系统中，你不再使用 GDB，而是要使用一个类似的程序，即 LLDB 调试器（LLDB）。其命令几乎相同，以下是 LLDB 的快速参考：

- `run [args]`：使用指定的参数 `[args]` 启动你的程序。
- `breakpoint set --name [file:]function`：在指定的文件（可选）和函数处设置断点。你也可以用 `b`，这个更简便。
- `thread backtrace`：打印当前调用栈的回溯信息。简写为 `bt`。
- `print expr`：打印表达式 `expr` 的值。简写为 `p`。
- `continue`：继续运行程序。简写为 `c`。
- `next`：执行下一行代码，但会跳过函数调用。简写为 `n`。
- `step`：执行下一行代码，如果是函数调用则进入函数内部。简写为 `s`。
- `quit`：退出 LLDB。
- `help`：列出命令的类型。之后你可以获取某类命令或特定命令的帮助信息。
- `cd`、`pwd`、`make`：使用方式和在 shell 中一样。
- `shell`：快速启动一个 shell，以便你可以执行其他操作。
- `clear`：清除一个断点。
- `info break`、`info watch`：显示断点和观察点的相关信息。
- `attach -p pid`：附加到一个正在运行的进程，以便对其进行调试。
- `detach`：从进程中分离。
- `list`：列出接下来的十行源代码。加上 `-` 则列出前十个源代码行。

你也可以在网上搜索 GDB 和 LLDB 的快速参考卡片和教程。



> 建议搜索 C 语言运算符优先级，相关的图片有很多，下文图片暂缺

# 练习 5. 记住 C 语言运算符

当你学习第一门编程语言时，很可能是通过阅读一本书，输入一些你不太理解的代码，然后试图弄清楚它是如何工作的。我写的其他大部分书也是采用这种方式，这对初学者来说非常有效。一开始，在你理解所有符号和单词的含义之前，有一些复杂的主题需要掌握，所以这是一种简单的学习方法。

然而，一旦你已经掌握了一门编程语言，这种通过潜移默化摸索来学习语法的方法就不是学习一门新语言的最有效方式了。这种方法虽然可行，但有一种更快的方法可以提升你使用该语言的技能和信心。这种学习编程语言的方法可能看起来像魔法，但你得相信我，它的效果出奇地好。

我希望你学习 C 语言的方式是，先记住所有基本符号和语法，然后通过一系列练习来应用它们。这种方法与你学习人类语言的方式非常相似，即先记住单词和语法，然后在对话中应用你所记住的内容。一开始只需付出一点记忆的努力，你就能获得基础知识，并且在阅读和编写 C 代码时会更轻松。

#### 警告！

有些人坚决反对死记硬背。通常，他们声称这会让你变得缺乏创造力且无趣。我就是一个例子，证明记住东西并不会让你变得缺乏创造力和无趣。我会画画、弹奏和制作吉他、唱歌、编程、写书，而且我记住了很多东西。这种观点完全没有根据，并且对高效学习有害。请忽略任何跟你说这种话的人。

#### 如何记忆

记忆东西的最佳方法其实相当简单：

1. 制作一套闪卡，一面写上符号，另一面写上符号的描述。你也可以使用一款名为 Anki 的程序在电脑上完成这个任务。我更喜欢自己制作，因为在制作的过程中就有助于我记忆。
2. 将闪卡打乱顺序，然后开始看一面。尽力在不看另一面的情况下回忆出内容。
3. 如果你记不起另一面的内容，就看一下，然后自己重复答案，再把这张卡放到一个单独的堆里。
4. 当你看完所有卡片后，会得到两堆卡片：一堆是你能快速回忆起来的，另一堆是你没能回忆起来的。拿起没记住的那堆卡片，只针对这些卡片进行强化记忆。
5. 在每次学习时段（通常为 15 - 30 分钟）结束时，你会有一些怎么都记不住的卡片。无论你走到哪里都带上这些卡片，有空的时候就练习记忆它们。

记忆东西还有很多其他技巧，但我发现这是让你能对需要立即使用的内容形成即时记忆的最佳方法。C 语言的符号、关键字和语法都是你需要即时回忆起来的内容，所以这种方法非常适合这个任务。

还要记住，你需要对闪卡的两面都进行学习。你应该既能根据描述知道对应的符号，也能说出符号的描述。

最后，在记忆这些运算符的过程中你不必停下来。最好的方法是将记忆和本书中的练习结合起来，这样你就可以应用你所记住的内容。关于这一点，可参考下一个练习。

#### 运算符列表

首先是算术运算符，它们与几乎所有其他编程语言中的算术运算符非常相似。制作闪卡时，描述面应说明它是算术运算符以及它的作用。

关系运算符用于测试值是否相等，同样，它们在编程语言中非常常见。

逻辑运算符用于执行逻辑测试，你应该已经知道它们的作用了。唯一比较特别的是逻辑三目运算符，你会在本书后面学到它。

位运算符在现代代码中你可能不常遇到。它们以各种方式改变组成字节和其他数据类型的位。我在本书中不会详细介绍，但在处理某些底层系统时，它们非常有用。

赋值运算符只是将表达式赋值给变量，但 C 语言将大量其他运算符与赋值操作结合在一起。所以当我说 “按位与并赋值” 时，指的是位运算符，而不是逻辑运算符。

我把这些称为数据运算符，但实际上它们处理的是 C 语言中指针、成员访问和数据结构的各个方面。

最后，有一些杂项符号，它们要么经常用于不同的用途（如逗号 `,`），要么由于各种原因不属于前面提到的任何类别。

在继续学习本书内容的同时，学习你的闪卡。如果你每天在学习前花 15 - 30 分钟，睡前再花 15 - 30 分钟，那么你很可能在几周内记住所有这些内容。